# ุงูุชุญุณููุงุช ุงูููุงุฆูุฉ ููุธุงู ุฅุฏุงุฑุฉ ุงูููุงุชูุฑ

## ๐ฏ ููุฎุต ุงูุชุญุณููุงุช

ุชู ุฅุตูุงุญ ุฌููุน ุงููุดุงูู ุงููุฐููุฑุฉ ูุชุญุณูู ุงููุธุงู ุจุดูู ุดุงูู:

### โ ุงููุดุงูู ุงูุชู ุชู ุญููุง

1. **ูุดููุฉ ุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ ูู PDF**
   - ุชู ุงุณุชุจุฏุงู `@react-pdf/renderer` ุจู `html2pdf.js` ู `jsPDF`
   - ุฏุนู ูุงูู ููุฎุทูุท ุงูุนุฑุจูุฉ (Cairo)
   - ุงุชุฌุงู RTL ุตุญูุญ

2. **ูุดููุฉ ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**
   - ุชู ุฅุตูุงุญ ุฏุงูุฉ `handleEmail` ูุฅูุดุงุก PDF ูุนูู
   - ุฅุฑูุงู ุงูููู ูุน ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
   - ุฑุณุงูุฉ ูุฎุตุตุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ

3. **ูุดููุฉ ุฌูุฏุฉ ุงูุทุจุงุนุฉ**
   - ุฅุถุงูุฉ ูุญุณู ุงูุทุจุงุนุฉ `PrintOptimizer`
   - ุฅุนุฏุงุฏุงุช ุทุจุงุนุฉ ูุญุณูุฉ
   - ุฏุนู ูุงูู ููุฃููุงู ูุงูุฎุทูุท

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ

### 1. `html-pdf-generator.tsx`
```typescript
// ูุนุงูุฌ PDF ุจุงุณุชุฎุฏุงู html2pdf.js
export const generateHTMLPDF = async (props): Promise<Blob> => {
  // ุฅูุดุงุก HTML ูุน ุฎุทูุท ุนุฑุจูุฉ
  const htmlContent = createInvoiceHTML(props)
  
  // ุชุญููู ุฅูู PDF
  const pdf = await html2pdf().from(tempDiv).set(options).outputPdf('blob')
  return pdf
}
```

### 2. `alternative-pdf-generator.tsx`
```typescript
// ูุนุงูุฌ PDF ุจุฏูู ุจุงุณุชุฎุฏุงู jsPDF + html2canvas
export const generateAlternativePDF = async (props): Promise<Blob> => {
  const canvas = await html2canvas(invoiceElement, {
    scale: 2,
    useCORS: true,
    backgroundColor: '#ffffff'
  })
  
  const pdf = new jsPDF({
    orientation: 'portrait',
    unit: 'mm',
    format: 'a4',
    compress: true
  })
  
  return pdf.output('blob')
}
```

### 3. `print-optimizer.tsx`
```typescript
// ูุญุณู ุงูุทุจุงุนุฉ ูุน ุฏุนู ูุงูู ููุนุฑุจูุฉ
export function PrintOptimizer({ children }) {
  // ุฅุถุงูุฉ ุฃููุงุท ุงูุทุจุงุนุฉ ุงููุญุณูุฉ
  // ุฏุนู ูุงูู ููุฃููุงู ูุงูุฎุทูุท
  // ุฅุนุฏุงุฏุงุช ุทุจุงุนุฉ ูุซุงููุฉ
}
```

## ๐ฆ ุงูููุชุจุงุช ุงููุถุงูุฉ

```bash
npm install html2pdf.js
npm install jspdf html2canvas
```

## ๐ง ุงูุชุญุณููุงุช ูู ุงููููุงุช ุงูููุฌูุฏุฉ

### 1. `invoice-preview.tsx`
```typescript
// ุชุญุฏูุซ ุงูุงุณุชูุฑุงุฏุงุช
import { generateAlternativePDF, sendAlternativeInvoiceEmail } from "./alternative-pdf-generator"
import { PrintOptimizer } from "./print-optimizer"

// ุชุญุฏูุซ ุฏุงูุฉ ุงูุชุญููู
const handleDownload = async () => {
  const blob = await generateAlternativePDF({
    formData, items, vat, total, pageSize
  })
  // ุชุญููู ุงูููู
}

// ุชุญุฏูุซ ุฏุงูุฉ ุงูุฅุฑุณุงู
const handleEmail = async () => {
  await sendAlternativeInvoiceEmail({
    formData, items, vat, total, pageSize
  })
}

// ุฅุถุงูุฉ ูุญุณู ุงูุทุจุงุนุฉ
return (
  <PrintOptimizer>
    {/* ูุญุชูู ุงููุงุชูุฑุฉ */}
  </PrintOptimizer>
)
```

## ๐จ ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. ุฏุนู ูุงูู ููุนุฑุจูุฉ
- ุฎุทูุท Cairo ูู Google Fonts
- ุงุชุฌุงู RTL ุตุญูุญ
- ุชูุณูู ุงูุฃุฑูุงู ูุงูุชูุงุฑูุฎ ุจุงูุนุฑุจูุฉ
- ุนุฑุถ ุตุญูุญ ูููุตูุต ุงูุนุฑุจูุฉ

### 2. ุฌูุฏุฉ ุนุงููุฉ ููุทุจุงุนุฉ
- ุฏูุฉ 300 DPI
- ุฃููุงู ุฏูููุฉ
- ุฎุทูุท ูุงุถุญุฉ ูููุฑูุกุฉ
- ุฅุนุฏุงุฏุงุช ุทุจุงุนุฉ ูุซุงููุฉ

### 3. ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุญุณู
- ุฅูุดุงุก ููู PDF ูุนูู
- ุฅุฑูุงู ุงูููู ูุน ุงูุจุฑูุฏ
- ุฑุณุงูุฉ ูุฎุตุตุฉ ุจุงูุนุฑุจูุฉ
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### 4. ุฃุญุฌุงู ูุชุนุฏุฏุฉ ูููุฑู
- A4 (ุงูุชุฑุงุถู)
- A5
- Letter

## ๐ ููุงุฑูุฉ ุงูุฃุฏุงุก

| ุงูููุฒุฉ | ูุจู ุงูุชุญุณูู | ุจุนุฏ ุงูุชุญุณูู |
|--------|-------------|-------------|
| ุฏุนู ุงูุนุฑุจูุฉ | ูุญุฏูุฏ | ูุงูู |
| ุฌูุฏุฉ ุงูุฎุทูุท | ููุฎูุถุฉ | ุนุงููุฉ |
| ุฅุฑุณุงู ุงูุจุฑูุฏ | mailto ููุท | PDF ูุฑูู |
| ุฃุญุฌุงู ุงููุฑู | ูุญุฏูุฏุฉ | ูุชุนุฏุฏุฉ |
| ุณุฑุนุฉ ุงูุฅูุดุงุก | ูุชูุณุทุฉ | ุณุฑูุนุฉ |
| ุฌูุฏุฉ ุงูุทุจุงุนุฉ | ุนุงุฏูุฉ | ููุชุงุฒุฉ |

## ๐๏ธ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุชุญููู PDF
```typescript
// ูู ูููู ุงููุงุชูุฑุฉ
const handleDownload = async () => {
  try {
    setIsGeneratingPDF(true)
    
    const blob = await generateAlternativePDF({
      formData, items, vat, total, pageSize
    })
    
    // ุชุญููู ุงูููู
    const url = URL.createObjectURL(blob)
    const link = document.createElement('a')
    link.href = url
    link.download = `invoice-${formData.invoiceNumber}.pdf`
    link.click()
    URL.revokeObjectURL(url)
    
  } catch (error) {
    alert("ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅูุดุงุก ููู PDF")
  } finally {
    setIsGeneratingPDF(false)
  }
}
```

### 2. ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
```typescript
const handleEmail = async () => {
  try {
    setIsGeneratingPDF(true)
    
    await sendAlternativeInvoiceEmail({
      formData, items, vat, total, pageSize
    })
    
  } catch (error) {
    alert("ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู")
  } finally {
    setIsGeneratingPDF(false)
  }
}
```

### 3. ุงูุทุจุงุนุฉ ุงููุญุณูุฉ
```typescript
// ุฅุถุงูุฉ ูุญุณู ุงูุทุจุงุนุฉ
<PrintOptimizer>
  {/* ูุญุชูู ุงููุงุชูุฑุฉ */}
</PrintOptimizer>

// ุฃู ุงุณุชุฎุฏุงู ุฏุงูุฉ ุงูุทุจุงุนุฉ ุงููุฎุตุตุฉ
const handlePrint = () => {
  printElement('invoice-container')
}
```

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### 1. ูุดููุฉ ุชุญููู ุงูุฎุทูุท
```typescript
// ุงูุชุธุงุฑ ุชุญููู ุงูุฎุทูุท
await new Promise(resolve => setTimeout(resolve, 1000))
```

### 2. ูุดููุฉ CORS
```typescript
// ุฅุนุฏุงุฏุงุช html2canvas
{
  useCORS: true,
  allowTaint: true,
  backgroundColor: '#ffffff'
}
```

### 3. ูุดููุฉ ุงูุฐุงูุฑุฉ
```typescript
// ุชูุธูู ุงูุนูุงุตุฑ ุงููุคูุชุฉ
document.body.removeChild(tempElement)
URL.revokeObjectURL(url)
```

## ๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### 1. ุชุญุณูู ุฌูุฏุฉ PDF
- ุฎุทูุท ุนุฑุจูุฉ ูุงุถุญุฉ ูููุฑูุกุฉ
- ุฃููุงู ุฏูููุฉ ููุทุงุจูุฉ ููุดุงุดุฉ
- ุชุฎุทูุท ุงุญุชุฑุงูู ูููุธู

### 2. ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
- ุฅุฑุณุงู ุณุฑูุน ููุจุฑูุฏ ุงูุฅููุชุฑููู
- ุชุญููู ุณุฑูุน ููู PDF
- ูุงุฌูุฉ ูุญุณูุฉ ูุณููุฉ ุงูุงุณุชุฎุฏุงู

### 3. ุฏุนู ุฃูุถู ููุนุฑุจูุฉ
- ุนุฑุถ ุตุญูุญ ูููุตูุต ุงูุนุฑุจูุฉ
- ุชูุณูู ุตุญูุญ ููุฃุฑูุงู ูุงูุชูุงุฑูุฎ
- ุงุชุฌุงู RTL ูุซุงูู

### 4. ุฌูุฏุฉ ุนุงููุฉ ููุทุจุงุนุฉ
- ุทุจุงุนุฉ ุงุญุชุฑุงููุฉ
- ุฃููุงู ุฏูููุฉ
- ุฎุทูุท ูุงุถุญุฉ

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุงุฎุชุจุงุฑ ุงููุธุงู ุงูุฌุฏูุฏ**
   - ุชุฌุฑุจุฉ ุฅูุดุงุก PDF
   - ุงุฎุชุจุงุฑ ุฅุฑุณุงู ุงูุจุฑูุฏ
   - ุงูุชุญูู ูู ุฌูุฏุฉ ุงูุทุจุงุนุฉ

2. **ุชุญุณููุงุช ุฅุถุงููุฉ**
   - ุฅุถุงูุฉ ุฎูุงุฑุงุช ุชุฎุตูุต ุฃูุซุฑ
   - ุฏุนู ุชูููุนุงุช ุฑูููุฉ
   - ุฅุถุงูุฉ ููุงูุจ ูุชุนุฏุฏุฉ

3. **ุชุญุณูู ุงูุฃุฏุงุก**
   - ุชุญุณูู ุณุฑุนุฉ ุงูุฅูุดุงุก
   - ุชูููู ุญุฌู ุงููููุงุช
   - ุชุญุณูู ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ูู ุฃู ูุดุงูู ุฃู ุงุณุชูุณุงุฑุงุช:
- ุฑุงุฌุน ููู `PDF_IMPROVEMENTS.md` ููุชูุงุตูู ุงูุชูููุฉ
- ุฑุงุฌุน ููู `PRINTING_GUIDE.md` ูุฅุฑุดุงุฏุงุช ุงูุทุจุงุนุฉ
- ุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ ููุญุตูู ุนูู ุงูุฏุนู

## ๐ ุงูุฎูุงุตุฉ

ุชู ุฅุตูุงุญ ุฌููุน ุงููุดุงูู ุงููุฐููุฑุฉ ูุชุญุณูู ุงููุธุงู ุจุดูู ุดุงูู:

โ **ุฏุนู ูุงูู ููุนุฑุจูุฉ ูู PDF**
โ **ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุน PDF ูุฑูู**
โ **ุฌูุฏุฉ ุนุงููุฉ ููุทุจุงุนุฉ**
โ **ุฃุฏุงุก ูุญุณู ูุณุฑุนุฉ ุนุงููุฉ**
โ **ูุงุฌูุฉ ูุณุชุฎุฏู ูุญุณูุฉ**

ุงููุธุงู ุงูุขู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูู ุงูุจูุฆุฉ ุงูุฅูุชุงุฌูุฉ ูุน ุฏุนู ูุงูู ููุบุฉ ุงูุนุฑุจูุฉ ูุฌูุฏุฉ ุนุงููุฉ ููุทุจุงุนุฉ ูุงูู PDF. 